schema: '2.0'
stages:
  split:
    cmd: python src/modeling.py split-data data/student-mat.csv data/processed/training.csv
      data/processed/test.csv
    deps:
    - path: data/student-mat.csv
      md5: 1bf5851f1f85bff8d109b872a144272b
      size: 41986
    params:
      params.yaml:
        split.test_size: 0.5
    outs:
    - path: data/processed/test.csv
      md5: 4f7d850048e3dfc03a8e83b718f7d252
      size: 21939
    - path: data/processed/training.csv
      md5: d4b65155318950cae496174f83ccac91
      size: 21750
  train:
    cmd: python src/modeling.py make-model data/processed/training.csv models/model.pkl
    deps:
    - path: data/processed/training.csv
      md5: d4b65155318950cae496174f83ccac91
      size: 21750
    params:
      params.yaml:
        model.n_estimators: 3000
        model.subsample: 0.4
    outs:
    - path: models/model.pkl
      md5: 7f2078666e98f7a6281261d1589b8474
      size: 1848124
  predict:
    cmd: python src/modeling.py predict models/model.pkl data/processed/test.csv data/output/
    deps:
    - path: data/processed/test.csv
      md5: 4f7d850048e3dfc03a8e83b718f7d252
      size: 21939
    - path: models/model.pkl
      md5: 7f2078666e98f7a6281261d1589b8474
      size: 1848124
    outs:
    - path: data/output/explainer.joblib
      md5: 6b013d166af2f398e515e34395e16b24
      size: 6365894
    - path: data/output/preds.pkl
      md5: 3fbb6b43072067ee3dc94847147269a3
      size: 3320
  evaluate:
    cmd: python src/modeling.py evaluate data/output/preds.pkl data/processed/test.csv
      scores.json pr_curve.json
    deps:
    - path: data/output/preds.pkl
      md5: 3fbb6b43072067ee3dc94847147269a3
      size: 3320
    outs:
    - path: data/output/results.csv
      md5: ccfc7ed82e28b2c31d74cb557096d5a8
      size: 807
    - path: pr_curve.json
      md5: b45ac58ab0f57d0b7aec7ee3023f7921
      size: 29760
    - path: scores.json
      md5: 335cddb996a91e29cb20f2d4e41bfa12
      size: 85
